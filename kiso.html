<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Google Pay Button Test</title>
<script async src="https://pay.google.com/gp/p/js/pay.js"></script>
</head>
<body>
<h1>Google Pay Button Tes</h1>
<div id="container"></div>
<script>
  const paymentsClient = new google.payments.api.PaymentsClient({environment: 'TEST'});
  const isReadyToPayRequest = {
    apiVersion: 2,
    apiVersionMinor: 0,
    allowedPaymentMethods: [{
      type: 'CARD',
      parameters: {
        allowedAuthMethods: ['PAN_ONLY', 'CRYPTOGRAM_3DS'],
        allowedCardNetworks: ['VISA', 'MASTERCARD']
      }
    }]
  };

  paymentsClient.isReadyToPay(isReadyToPayRequest).then(response => {
    console.log("isReadyToPay:", response);
    if(response.result) {
      const button = paymentsClient.createButton({
        onClick: () => alert("Clicked Google Pay Button!")
      });
      document.getElementById('container').appendChild(button);
    } else {
      document.getElementById('container').innerText = "Google Pay არ არის ხელმისაწვდომი ამ მოწყობილობაზე.";
    }
  }).catch(err => {
    console.error("isReadyToPay error:", err);
    document.getElementById('container').innerText = "შეცდომა Google Pay-ის შემოწმებისას.";
  });
</script>
</body>
</html>
